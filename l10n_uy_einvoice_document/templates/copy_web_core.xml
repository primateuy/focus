<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <template id="external_layout_standard_custom">
        <t t-set="clientLang" t-value="doc.partner_id.lang"/>
        <t t-set="companyLang" t-value="doc.company_id.partner_id.lang"/>
        <t t-if="doc.company_id.translations and clientLang != companyLang">
            <t t-if="clientLang == 'es_uy' or clientLang == 'es_AR' or clientLang == 'es' or clientLang == 'es_ES' and companyLang == 'pt_BR'">
                <t t-call="l10n_uy_einvoice_document.body_lang_español_portugues">
                </t>
            </t>
            <t t-elif="clientLang == 'es_uy' or clientLang == 'es_AR' or clientLang == 'es' or clientLang == 'es_ES' and companyLang == 'en_US'">
                <t t-call="l10n_uy_einvoice_document.body_lang_español_ingles">
                    <t t-out="0"/>
                </t>
            </t>

            <t t-elif="clientLang == 'en_US' and companyLang == 'pt_BR'">
                <t t-call="l10n_uy_einvoice_document.body_lang_ingles_portugues">
                    <t t-out="0"/>
                </t>
            </t>

            <t t-elif="clientLang == 'en_US' and companyLang == 'es_UY' or companyLang == 'es_AR' or companyLang == 'es' or companyLang == 'es_ES'">
                <t t-call="l10n_uy_einvoice_document.body_lang_ingles_español">
                    <t t-out="0"/>
                </t>
            </t>

            <t t-elif="clientLang == 'pt_BR' and companyLang == 'es_UY' or companyLang == 'es_AR' or companyLang == 'es' or companyLang == 'es_ES'">
                <t t-call="l10n_uy_einvoice_document.body_lang_portugues_español">
                    <t t-out="0"/>
                </t>
            </t>

            <t t-elif="clientLang == 'pt_BR' and companyLang == 'en_US'">
                <t t-call="l10n_uy_einvoice_document.body_lang_portugues_ingles">
                    <t t-out="0"/>
                </t>
            </t>

        </t>
        <t t-else="">
            <t t-if="companyLang == 'pt_BR'">
                <t t-call="l10n_uy_einvoice_document.body_lang_portugues">
                    <t t-out="0"/>
                </t>
            </t>
            <t t-elif="companyLang == 'en_US'">
                <t t-call="l10n_uy_einvoice_document.body_lang_ingles">
                    <t t-out="0"/>
                </t>
            </t>
            <t t-else="">
                <t t-call="l10n_uy_einvoice_document.body_lang_español">
                    <t t-out="0"/>
                </t>
            </t>
        </t>
    </template>


    <template id="external_layout_custom">
        <t t-if="not o" t-set="o" t-value="doc"/>

        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        <t t-call="l10n_uy_einvoice_document.external_layout_standard_custom">
            <t t-out="0"/>
        </t>


    </template>


    <template id="body_lang_portugues">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'EMISSOR RUT ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'CONTA: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width: 390px; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SÉRIE</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NÚMERO</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAGAR</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">MOEDA</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width: 390px; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEPTOR</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; border-bottom-left-radius:7px; font-size:10px;">DATA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding: ;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">MATURIDADE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; ">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PREÇO</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; ">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID DA COMPRA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                        </thead>
                    </table>




                    <!-- TABLA DE PRODUCTOS -->

                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px; border-bottom-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 35%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="width: 35%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">RÓTULO</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px; border-bottom-right-radius:7px;">ADIÇÃO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>
                    <t t-else="">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px; border-bottom-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 50%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px; border-bottom-right-radius:7px;">ADIÇÃO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>



                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTAIS</span>
                            </div>

                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>Não tributado</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Líquido Taxa mínima de IVA</span>
                                        <br/>
                                        <span>Taxa Mínima de IVA</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>Líquido Taxa básica de IVA</span>
                                        <br/>
                                        <span>Taxa Básica de IVA</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span>IVA Total</span>
                                        <br/>
                                    </t>
                                    <span>Montante total</span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>
                            </div>


                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>



                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">ADENDA</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Não tributado 2. Taxa mínima 3. Taxa básica 4. Outra taxa 5. Entrega gratuita 6. Não faturável 10. Exportação e Assimilado 11. Imposto cobrado 12. IVA suspenso</span>
                                    <br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Série</span>
                                <br/>
                                <span>Faixa</span>
                                <br/>
                                <span>Data do emissor</span>
                                <br/>
                                <span>Verificação</span>
                                <br/>
                                <span>IVA por dia</span>

                            </div>
                            <div>
                                <span><t t-esc="doc.cfe_cae_auth"/></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Data de validade</span>
                    <br/>
                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Código de segurança: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Página </span>
                    <span class="page" />
                                        de <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_ingles">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">

                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">
                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>
                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width: 390px; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'ISSUER TAX ID: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'INVOICE: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width: 390px; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SERIAL</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NUMBER</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAYMENT</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">CURRENCY</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEIVER</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; border-bottom-left-radius:7px; font-size:10px;">DATE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PAYMENT DUE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; ">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">EXCHANGE RATE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; ">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PURCHASE NUM</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                        </thead>
                    </table>
                    <!-- TABLA DE PRODUCTOS -->

                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px; border-top-left-radius: 7px;">CODE</td>
                                    <td t-attf-style="width: 35%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="width: 35%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">LABEL</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px; border-bottom-right-radius: 7px;">AMOUNT</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>
                    <t t-else="">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px; border-top-left-radius: 7px;">CODE</td>
                                    <td t-attf-style="width: 50%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px; border-bottom-right-radius: 7px;">AMOUNT</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>

                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTALS</span>
                            </div>

                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>Not Taxed </span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Net VAT Basic Rate  </span>
                                        <br/>
                                        <span> VAT Basic Rate</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span> Net VAT Basic Rate  </span>
                                        <br/>
                                        <span> VAT Basic Rate  </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span> VAT Total Rate </span>
                                        <br/>
                                    </t>
                                    <span>Total Amount </span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                </div>
                            </div>

                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>




                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">COMMENTS</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Not taxed 2. Minimum rate 3. Basic rate 4. Other rate 5. Free delivery 6. Not billable 10. Export and Assimilated 11. Tax collected 12. Suspended VAT</span>
                                    <br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serial</span>
                                <br/>
                                <span>Range</span>
                                <br/>
                                <span>Date issuer</span>
                                <br/>
                                <span>Verification</span>
                                <br/>
                                <span>IVA up to date</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Expiration date</span>
                    <br/>
                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Security Code: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Page </span>
                    <span class="page" />
                                        of <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_español">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'RUT EMISOR: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'FACTURA: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width: 390px; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SERIE</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NÚMERO</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAGO</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">MONEDA</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width: 390px; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEPTOR</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; border-bottom-left-radius:7px; font-size:10px;">FECHA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">VENCIMIENTO</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; ">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">COTIZACIÓN</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; ">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: middel; padding:  5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID COMPRA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;">
                                    <t t-esc="doc.nro_compra or '       '"/>
                                </td>
                            </tr>
                        </thead>
                    </table>
                    <!-- TABLA DE PRODUCTOS -->

                    <t t-if="doc.company_id.product_tag">
                        <!-- Mostrar etiqueta del producto -->
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px; border-bottom-left-radius:7px;">CODIGO</td>
                                    <td t-attf-style="width: 35%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="width: 35%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">ETIQUETA</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="width: 5%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px; border-top-right-radius:7px;">MONTO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>

                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>
                    <t t-else="">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px; border-bottom-left-radius:7px;">CODIGO</td>
                                    <td t-attf-style="width: 50%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="width: 10%; padding: 8px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px; border-top-right-radius:7px;">MONTO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>

                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTALES</span>
                            </div>

                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>No Gravado</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span> Neto IVA Tasa Mínimia  </span>
                                        <br/>
                                        <span> IVA Tasa Mínimia</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span> Neto IVA Tasa Básica </span>
                                        <br/>
                                        <span> IVA Tasa Básica </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span> IVA Total</span>
                                        <br/>
                                    </t>
                                    <span> Monto Total</span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                </div>
                            </div>


                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>


                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">ADENDA</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. No gravado 2. Tasa mínima 3. Tasa básica 4. Otra tasa 5. Entrega gratuita 6. No facturable 10. Exportación y Asimiladas 11. Imp.percibido 12.IVA en suspenso</span>
                                    <br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serie</span>
                                <br/>
                                <span>Rángo</span>
                                <br/>
                                <span>Fecha emisor</span>
                                <br/>
                                <span>Verificación</span>
                                <br/>
                                <span>IVA al día</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Fecha de Vencimiento</span>
                    <br/>
                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Código de Seguridad: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Página </span>
                    <span class="page" />
                                        de <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_ingles_español">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'ISSUER TAX ID/RUT EMISOR: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'INVOICE/FACTURA: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SERIAL/SERIE</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NUMBER/NÚMERO</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAYMENTPAGO</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">CURRENCY/MONEDA</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEIVER/RECEPTOR</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; font-size:10px;">DATE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PAYMENT DUE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">EXCHANGE RATE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PURCHASE NUM</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-bottom-left-radius: 10px; font-size:10px;">FECHA</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">VENCIMIENTO</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">COTIZACIÓN</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID COMPRA</td>
                            </tr>
                        </thead>
                    </table>

                    <!-- TABLA DE PRODUCTOS -->
                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CODE</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">LABEL</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">AMOUNT</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CODIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">ETIQUETA</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">MONTO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>
                    <t t-else="">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CODE</td>
                                    <td t-attf-style="width: 50%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">AMOUNT</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CODIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">MONTO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>




                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTALS/TOTALES</span>
                            </div>


                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>Not Taxed / No Gravado</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Net VAT Basic Rate / Neto IVA Tasa Mínimia  </span>
                                        <br/>
                                        <span> VAT Basic Rate / IVA Tasa Mínimia</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span> Net VAT Basic Rate / Neto IVA Tasa Básica </span>
                                        <br/>
                                        <span> VAT Basic Rate / IVA Tasa Básica </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span> VAT Total Rate / IVA Total</span>
                                        <br/>
                                    </t>
                                    <span>Total Amount / Monto Total</span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                </div>
                            </div>




                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>



                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">ADENDA/COMMENTS</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Not taxed 2. Minimum rate 3. Basic rate 4. Other rate 5. Free delivery 6. Not billable 10. Export and Assimilated 11. Tax collected 12. Suspended VAT</span>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. No gravado 2. Tasa mínima 3. Tasa básica 4. Otra tasa 5. Entrega gratuita 6. No facturable 10. Exportación y Asimiladas 11. Imp.percibido 12.IVA en suspenso</span>
                                    <br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serial/Serie</span>
                                <br/>
                                <span>Range/Rángo</span>
                                <br/>
                                <span>Date issuer/Fecha emisor</span>
                                <br/>
                                <span>Verification/Verificación</span>
                                <br/>
                                <span>IVA up to date/IVA al día</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Expiration date</span>
                    <br/>
                    <span> Fecha de Vencimiento </span>
                    <br/>
                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Security Code/Código de Seguridad: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Page </span>
                    <span class="page" />
                                        of <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_español_ingles">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'RUT EMISOR/ISSUER TAX ID: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'FACTURA/INVOICE: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SERIE/SERIAL</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NÚMERO/NUMBER</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAGO/PAYMENT</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">MONEDA/CURRENCY</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEPTOR/RECEIVER</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; font-size:10px;">FECHA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">VENCIMIENTO</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">COTIZACIÓN</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID COMPRA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-bottom-left-radius: 10px; font-size:10px;">DATE</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PAYMENT DUE</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">EXCHANGE RATE</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PURCHASE NUM</td>
                            </tr>
                        </thead>
                    </table>

                    <!-- TABLA DE PRODUCTOS -->
                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CODIGO</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">ETIQUETA</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">MONTO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CODE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">LABEL</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">AMOUNT</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>

                    <t t-else="">

                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CODIGO</td>
                                    <td t-attf-style="width: 50%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">MONTO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CODE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">AMOUNT</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>

                    </t>





                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTALES/TOTALS</span>
                            </div>


                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>No Gravado / Not Taxed</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Neto IVA Tasa Mínimia / Net VAT Basic Rate </span>
                                        <br/>
                                        <span>IVA Tasa Mínimia / VAT Basic Rate</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>Neto IVA Tasa Básica / Net VAT Basic Rate</span>
                                        <br/>
                                        <span> IVA Tasa Básica / VAT Basic Rate</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span>IVA Total / VAT Total Rate</span>
                                        <br/>
                                    </t>
                                    <span>Monto Total / Total Amount</span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                </div>
                            </div>




                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>


                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">ADENDA/COMMENTS</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. No gravado 2. Tasa mínima 3. Tasa básica 4. Otra tasa 5. Entrega gratuita 6. No facturable 10. Exportación y Asimiladas 11. Imp.percibido 12.IVA en suspenso</span>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Not taxed 2. Minimum rate 3. Basic rate 4. Other rate 5. Free delivery 6. Not billable 10. Export and Assimilated 11. Tax collected 12. Suspended VAT</span>
                                    <br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serie/Serial</span>
                                <br/>
                                <span>Rángo/Range</span>
                                <br/>
                                <span>Fecha emisor/Date issuer</span>
                                <br/>
                                <span>Verificación/Verification</span>
                                <br/>
                                <span>IVA al día/IVA up to date</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span> Fecha de Vencimiento </span>
                    <br/>
                    <span>Expiration date</span>
                    <br/>
                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Código de Seguridad/Security Code: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Página </span>
                    <span class="page" />
                                        de <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_portugues_español">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'EMISSOR RUT/RUT EMISOR: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'CONTA/FACTURA: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SERIE/SERIAL</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NÚMERO/NUMBER</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAGO/PAYMENT</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">MONEDA/CURRENCY</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEPTOR/RECEPTOR</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; font-size:10px;">DATA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">MATURIDADE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">COTAÇÃO</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID DA COMPRA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-bottom-left-radius: 10px; font-size:10px;">FECHA</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">VENCIMIENTO</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">COTIZACIÓN</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID COMPRA</td>
                            </tr>
                        </thead>
                    </table>




                    <!-- TABLA DE PRODUCTOS -->
                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">RÓTULO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIA</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">ADIÇÃO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CÓDIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">ETIQUETA</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">MONTO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>
                    <t t-else="">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 50%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIA</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">ADIÇÃO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CÓDIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">MONTO</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>




                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTAIS/TOTALES</span>
                            </div>


                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>Não tributado / No Gravado</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Líquido Taxa Mínima de IVA / Neto Tasa Mínima de IVA </span>
                                        <br/>
                                        <span>Taxa Mínima de IVA / IVA Tasa Mínima</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>Líquido Taxa Básica de IVA / Neto IVA Tasa Báscia</span>
                                        <br/>
                                        <span>Taxa Básica de IVA / IVA Tasa Básica</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span>IVA Total / IVA Total</span>
                                        <br/>
                                    </t>
                                    <span>Montante total / Monto Total </span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                </div>
                            </div>




                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>



                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">ADENDA</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Não tributado 2. Taxa mínima 3. Taxa básica 4. Outra taxa 5. Entrega gratuita 6. Não faturável 10. Exportação e Assimilado 11. Imposto cobrado 12. IVA suspenso</span>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. No gravado 2. Tasa mínima 3. Tasa básica 4. Otra tasa 5. Entrega gratuita 6. No facturable 10. Exportación y Asimiladas 11. Imp.percibido 12.IVA en suspenso</span>
                                    <br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serie/Serie</span>
                                <br/>
                                <span>Faixa/Rángo</span>
                                <br/>
                                <span>Data do emissor/Fecha emisor</span>
                                <br/>
                                <span>Verificação/Verificación/</span>
                                <br/>
                                <span>IVA por dia/IVA al día</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Data de validade</span>
                    <br/>
                    <span> Fecha de Vencimiento </span>
                    <br/>

                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Código de segurança/Código de Seguridad: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Página </span>
                    <span class="page" />
                                        de <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_portugues_ingles">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'EMISSOR RUT/ISSUER TAX ID: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'CONTA/INVOICE: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SERIE/SERIAL</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NÚMERO/NUMBER</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAGO/PAYMENT</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">MONEDA/CURRENCY</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEPTOR/RECEIVER</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; font-size:10px;">DATA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">MATURIDADE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PREÇO</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID DA COMPRA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-bottom-left-radius: 10px; font-size:10px;">FECHA</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PAYMENT DUE</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">EXCHANGE RATE</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PURCHASE NUM</td>
                            </tr>
                        </thead>
                    </table>

                    <!-- TABLA DE PRODUCTOS -->

                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">RÓTULO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIA</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">ADIÇÃO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CODE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">LABEL</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">AMOUNT</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>

                    <t t-else="">

                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 50%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIA</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">ADIÇÃO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CODE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">AMOUNT</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>

                    </t>




                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTAIS/TOTALS</span>
                            </div>



                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>Não tributado / Not Taxed</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Neto Taxa Mínima de IVA/Net VAT Min Rate</span>
                                        <br/>
                                        <span>Taxa Mínima de IVA / VAT Min Rate</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>Neto Taxa Básica de IVA/Net VAT Basic Rate</span>
                                        <br/>
                                        <span>Taxa Básica de IVA/VAT Basic Rate</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span>IVA Total / VAT Total Rate</span>
                                        <br/>
                                    </t>
                                    <span>Montante total / Total Amount</span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                </div>
                            </div>



                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>



                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">ADENDA/COMMENTS</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Não tributado 2. Taxa mínima 3. Taxa básica 4. Outra taxa 5. Entrega gratuita 6. Não faturável 10. Exportação e Assimilado 11. Imposto cobrado 12. IVA suspenso</span>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Not taxed 2. Minimum rate 3. Basic rate 4. Other rate 5. Free delivery 6. Non-billable 10. Export and Assimilation 11. Tax charged 12. VAT suspended</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serie/Serial</span>
                                <br/>
                                <span>Faixa/Range</span>
                                <br/>
                                <span>Data do emissor/Date issuer</span>
                                <br/>
                                <span>Verificação/Verification</span>
                                <br/>
                                <span>IVA por dia/IVA up to date</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Data de validade</span>
                    <br/>
                    <span> Expiration Date </span>
                    <br/>

                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Código de segurança/Security code: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Página </span>
                    <span class="page" />
                                        de <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_español_portugues">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'RUT EMISOR/EMISSOR RUT: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'FACTURA/CONTA: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SÉRIE/SÉRIE</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NÚMERO/NÚMERO</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAGO/PAGAR</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">MONEDA/MONEDA</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEPTOR/RECEPTOR</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; font-size:10px;">FECHA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">VENCIMIENTO</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">COTIZACIÓN</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID COMPRA</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-bottom-left-radius: 10px; font-size:10px;">DATA</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">MATURIDADE</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PREÇO</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID DA COMPRA</td>
                            </tr>
                        </thead>
                    </table>




                    <!-- TABLA DE PRODUCTOS -->

                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">ETIQUETA</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">MONTO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CÓDIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">RÓTULO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">QUANTIA</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>

                    <t t-else="">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CÓDIGO</td>
                                    <td t-attf-style="width: 50%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPCIÓN</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDAD</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">CANTIDAD</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRECIO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCUENTO</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">MONTO</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CÓDIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">QUANTIA</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>


                    </t>

                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTALES/TOTAIS</span>
                            </div>


                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>No Gravado/Não tributado</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Neto IVA Tasa Mínima / Taxa mínima de IVA líquido</span>
                                        <br/>
                                        <span>IVA Tasa Mínimia / Taxa mínima de IVA</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>Neto IVA Tasa Básica / Taxa Básica de IVA líquido</span>
                                        <br/>
                                        <span>IVA Tasa Básica / Taxa Básica de IVA</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span>IVA Total / IVA Total</span>
                                        <br/>
                                    </t>
                                    <span>Monto Total / Montante total</span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                </div>
                            </div>




                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>



                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">ADENDA/ADENDA</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. No gravado 2. Tasa mínima 3. Tasa básica 4. Otra tasa 5. Entrega gratuita 6. No facturable 10. Exportación y Asimiladas 11. Imp.percibido 12.IVA en suspenso</span>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Não tributado 2. Taxa mínima 3. Taxa básica 4. Outra taxa 5. Entrega gratuita 6. Não faturável 10. Exportação e similares 11. Imposto cobrado 12. IVA suspenso</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serie/Serie</span>
                                <br/>
                                <span>Rángo/Faixa</span>
                                <br/>
                                <span>Fecha de emisor/Data do emissor</span>
                                <br/>
                                <span>Verificación/Verificação</span>
                                <br/>
                                <span>IVA al día/IVA por dia</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Fecha de Vencimiento</span>
                    <br/>
                    <span> Data de Validade </span>
                    <br/>

                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Código de seguridad/Código de segurança: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Página </span>
                    <span class="page" />
                                        de <span class="topage" />
                </div>
            </div>
        </div>
    </template>

    <template id="body_lang_ingles_portugues">
        <div t-attf-class="article o_report_layout_standard o_company_#{company.id}_layout {{  'o_report_layout_background' if company.layout_background in ['Geometric', 'Custom']  else  '' }}" t-attf-style="background-image: url({{ 'data:image/png;base64,%s' % doc.company_id.layout_background_image.decode('utf-8') if doc.company_id.layout_background_image else ''}});" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">

            <div style="padding: 25px 25px 0px 25px;">
                <!-- HEADER -->
                <div style="webkit-box-pack: justify; display: -webkit-box;">
                    <!-- LOGO -->
                    <div style="text-align:center; width:458px; height: 229px;">
                        <t t-if="doc.company_id.invoice_address">


                            <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            <br/>
                            <strong>
                                <t t-esc="doc.company_id.name"/>
                            </strong>

                            <!--INFORMACIÓN SOBRE LA COMPAÑIA-->

                            <strong>
                                <t t-esc="doc.company_id.social_reason or ''"/>
                            </strong>
                            <t t-esc="doc.company_id.city or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.street or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.state_id.name or ''"/>
                            <br/>
                            <t t-esc="doc.company_id.zip or ''"/>

                        </t>
                        <t t-else="">

                            <div style="text-align:center; width:458px; height: 229px;">
                                <img t-if="doc.company_id.logo" style="width:350px; height: 175px;" t-att-src="image_data_uri(doc.company_id.logo)" alt="Logo" />
                            </div>

                        </t>
                    </div>
                    <!--TABLAS CABEZAL DERECHO-->
                    <div name="cabezal_derecho">
                        <table style="width:100%; text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <t t-if=""></t>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">
                                    <t t-esc="'ISSUER TAX ID/EMISSOR RUT: ' + doc.company_id.vat"/>
                                    <span class="topage" />

                                </td>
                            </tr>
                            <tr>
                                <td style="font-size:16px;padding: 20px 0px;vertical-align:middle;">
                                    <t t-esc="'INVOICE/CONTA: ' + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px;text-align: center;border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-left-radius: 7px;border-bottom-left-radius: 7px;">SERIAL/SÉRIE</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">NUMBER/NÚMERO</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};">PAYMENT/PAGAR</td>
                                <td t-attf-style="font-size:10px;padding: 5px 10px 5px 10px;color: white;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-top-right-radius: 7px;border-bottom-right-radius: 7px;">CURRENCY/MOEDA</td>
                            </tr>
                            <tr>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[1]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.invoice_payment_term_id.name"/>
                                </td>
                                <td style="font-size:15px;padding: 5px 10px 5px 10px;vertical-align:middle;">
                                    <t t-esc="doc.currency_id.name"/>
                                </td>
                            </tr>
                        </table>
                        <table style="width:100%; margin-bottom:10px; text-align: center; border-collapse:separate;" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="font-size:16px; color:white; padding: 10px 20px 10px 20px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}};border-radius: 7px;">RECEIVER/RECEPTOR</td>
                            </tr>
                            <tr style="font-size: 14px;">
                                <td>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.social_reason or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-attf-style="mt-3" t-esc="doc.partner_id.street or '' + doc.partner_id.street2 or ''"/>
                                    <br/>
                                    <br/>
                                    <t t-esc="doc.partner_id.state_id.name or ''"/>
                                    <t t-esc=" ', '"/>
                                    <t t-esc="doc.partner_id.country_id.name"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- BODY -->
                <div style="padding-bottom: 50px;" class="body-content">
                    <!--HEADING DE FECHAS-->
                    <table style="width:100%; border-collapse:separate; margin-top:15px;" border="0" cellspacing="0" cellpadding="0">
                        <thead>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-left-radius:7px; font-size:10px;">DATE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.invoice_date"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;"> PAYMENT DUE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.invoice_date_due"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">EXCHANGE RATE</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:16px; " rowspan="2">
                                    <t t-esc="doc.currency_rate"/>
                                </td>
                                <td t-attf-style="white-space: nowrap; vertical-align: bottom; padding:  5px 5px 1px 5px;  width: 10%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">PURCHASE NUM</td>
                                <td t-attf-style="vertical-align: middel; padding:  5px 5px 1px 5px;  width: 15%; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-top-right-radius: 10px; border-bottom-right-radius: 7px; font-size:16px;" rowspan="2">
                                    <t t-esc="doc.nro_compra or ''"/>
                                </td>
                            </tr>
                            <tr t-afft-style="border:none;">
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; border-bottom-left-radius: 10px; font-size:10px;">FECHA</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">MATURIDADE</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">TAXA DE CÂMBIO</td>
                                <td t-attf-style="white-space: nowrap; vertical-align:top; padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color: white; border: none !important; font-size:10px;">ID COMPRA</td>
                            </tr>
                        </thead>
                    </table>




                    <!-- TABLA DE PRODUCTOS -->


                    <t t-if="doc.company_id.product_tag">
                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CODE</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="width: 35%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">LABEL</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="width: 5%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">AMOUNT</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CÓDIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">RÓTULO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">QUANTIA</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </t>

                    <t t-else="">

                        <table style="font-size:14px; border-collapse:separate; margin-top:10px;" border="0" cellspacing="0" cellpadding="0">
                            <thead>
                                <tr style=" font-size: 10px; border-bottom:none; ">
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-left-radius:7px;">CODE</td>
                                    <td t-attf-style="width: 50%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIPTION</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIT</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUNATITY</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PRICE</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DISCOUNT</td>
                                    <td t-attf-style="width: 10%; padding: 5px 5px 1px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-top-right-radius: 7px;">AMOUNT</td>
                                </tr>
                                <tr t-attf-style=" border-top:none; padding-bottom: 10px; font-size: 10px;">
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-left-radius: 7px;">CÓDIGO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCRIÇÃO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">UNIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">QUANTIDADE</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">PREÇO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none;">DESCONTO</td>
                                    <td t-attf-style="padding: 1px 5px 5px 5px; background-color: {{doc.company_id.background_color or '#e93340'}}; color:white; border:none; border-bottom-right-radius: 7px;">QUANTIA</td>
                                </tr>
                            </thead>
                            <tbody style="border:none;" class="invoice_tbody">
                                <tr t-foreach="doc.invoice_line_ids" t-as="l">
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_id.id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.name"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.product_uom_id"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.quantity"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td style="padding-left:5px; " class="text-left">
                                        <span t-field="l.price_subtotal"/>
                                    </td>


                                </tr>
                            </tbody>
                        </table>

                    </t>


                </div>

                <t t-foreach="doc.line_ids" t-as="l">
                    <t t-if="l.name == 'IVA Ventas (10%)'">
                        <t t-set="iva10" t-value="l.credit"/>
                    </t>
                    <t t-if="l.name == 'IVA Ventas (22%)'">
                        <t t-set="iva22" t-value="l.credit"/>
                    </t>
                </t>

                <div style="page-break-inside: avoid;">
                    <!-- TOTALES -->
                    <div style="padding-bottom: 25px;">
                        <div name="totales">

                            <div t-attf-style="padding:7px; margin-bottom: 10px; text-align:center; background-color: {{doc.company_id.background_color or '#e93340'}};  border-radius:8px;">
                                <span t-attf-style="color: white;  font-size: 16px;">TOTALES/TOTALS</span>
                            </div>


                            <div style="padding: 5px; display: -webkit-box; -webkit-box-pack: justify; font-size:16px">
                                <div>
                                    <span>Not Taxed/Não tributado</span>
                                    <br/>
                                    <t t-if="iva10">
                                        <span>Taxa mínima de IVA líquido</span>
                                        <br/>
                                        <span>VAT Basic Rate/Taxa mínima de IVA</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>Taxa básica de IVA líquido</span>
                                        <br/>
                                        <span>VAT Basic Rate/Taxa Básica de IVA</span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22 or iva10">
                                        <span>VAT Total Rate/IVA Total</span>
                                        <br/>
                                    </t>
                                    <span>Total Amount/Montante total</span>
                                    <br/>
                                    <span>Rounding - Non Billable/Arredondamento - Não faturável</span>
                                    <br/>
                                </div>
                                <div>
                                    <span>
                                        <t t-esc="doc.amount_untaxed"/>
                                    </span>
                                    <br/>



                                    <t t-if="iva10">
                                        <span>
                                            <t t-esc="iva10 / 0.1"/>
                                        </span>
                                        <br/>
                                        <span>
                                            <t t-esc="iva10"/>
                                        </span>
                                        <br/>
                                    </t>
                                    <t t-if="iva22">
                                        <span>
                                            <t t-esc="iva22 / 0.22"/>
                                        </span>
                                        <br/>

                                        <span>
                                            <t t-esc="iva22"/>
                                        </span>
                                        <br/>
                                    </t>

                                    <t t-if="iva22">
                                        <t t-if="iva10">
                                            <t t-esc="iva22 + iva10"/>
                                        </t>
                                        <t t-else="">
                                            <t t-esc="iva22"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-esc="iva10"/>
                                    </t>
                                    <br/>
                                    <span>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                    <br/>
                                    <span></span>
                                    <br/>
                                    <span></span>
                                    <br/>
                                </div>
                            </div>



                            <div style="display: -webkit-box; -webkit-box-pack: justify; font-size: 20px">
                                <div style="padding-left: 10px;">
                                    <span>Total</span>
                                </div>
                                <div style="padding-right: 10px;">
                                    <span>
                                        <t t-esc="doc.currency_id.symbol"/>
                                        <t t-esc="' '"/>
                                        <t t-esc="doc.amount_total"/>
                                    </span>
                                </div>

                            </div>



                        </div>
                    </div>


                    <!-- ADENDA -->

                    <div style="text-align: center;">
                        <table t-attf-style="border: 5px solid {{doc.company_id.background_color or '#e93340'}}; width:100%;border-collapse:separate; border-radius: 10px" cellspacing="0" cellpadding="0">
                            <tr>
                                <td t-attf-style="padding: 7px 0px; color: white; text-align: center;font-size:16px;vertical-align:middle; background-color: {{doc.company_id.background_color or '#e93340'}}; ">COMMENTS/ADENDA</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">
                                    <br/>
                                    <t t-esc="doc.narration or ''" />
                                    <br/>
                                    <br/>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Not taxed 2. Minimum rate 3. Basic rate 4. Other rate 5. Free delivery 6. Not billable 10. Export and Similar 11. Tax collected 12. VAT suspended</span>
                                    <br/>
                                    <span style="text-align: center;font-size:14px;">* 1. Não tributado 2. Taxa mínima 3. Taxa básica 4. Outra taxa 5. Entrega gratuita 6. Não faturável 10. Exportação e similares 11. Imposto cobrado 12. IVA suspenso</span>
                                    <br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div t-attf-class="footer o_standard_footer o_company_#{company.id}_layout" t-attf-style="border-top: 1px solid black">
            <div style=" padding-top: 10px; display: -webkit-box; -webkit-box-pack: justify; -webkit-align-items: flex-end;">
                <div style="width: 50%; display: -webkit-box; ">
                    <!-- CODIGO QR -->
                    <div>
                        <t t-set="qr_code" t-value="'https://www.efactura.dgi.gub.uy/consultaQR/cfe?'"/>
                        <!-- RUT -->
                        <t t-set="qr_code" t-value="qr_code + (doc.partner_id.vat or '') + ','"/>
                        <!-- Serie -->
                        <t t-set="formatted_value" t-value="','.join(doc.cfe_serie_num.split('-'))"/>
                        <t t-set="qr_code" t-value="qr_code + formatted_value + ','"/>
                        <!-- Total -->
                        <!-- Esto asegurará que siempre tengas dos decimales -->
                        <!-- <t t-set="amount_residual" t-value="formatLang(doc.amount_residual, digits=2)"/> -->
                        <t t-set="qr_code" t-value="qr_code + str(doc.amount_residual or '') + ',' "/>
                        <!-- Fecha -->
                        <t t-set="qr_code" t-value="qr_code + doc.cfe_cae_auth_date.split('-')[2] + '/' +  doc.cfe_cae_auth_date.split('-')[1] + '/' +  doc.cfe_cae_auth_date.split('-')[0] + ','"/>
                        <!-- Tipo de comprobante -->
                        <t t-set="qr_code" t-value="qr_code + (doc.cfe_hash or '') + '%3D' "/>
                        <img t-att-src="'/report/barcode/QR/' + qr_code" style="width:100px; height:100px;" alt="QR Code"/>
                    </div>
                    <!-- INFO DGI -->
                    <div style="font-size: 14px; margin-left: 10px;">

                        <div t-attf-style=" display: -webkit-box; -webkit-box-pack: justify;">
                            <div style="margin-left: 30px; margin-right: 15px;">

                                <span>C.A.E. Nº</span>
                                <br/>
                                <span>Serial/Serie</span>
                                <br/>
                                <span>Range/Faixa</span>
                                <br/>
                                <span>Date issuer/Data do emissor</span>
                                <br/>
                                <span>Verification/Verificação</span>
                                <br/>
                                <span>IVA up to date/IVA por dia</span>

                            </div>
                            <div>
                                <span></span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_serie_num.split('-')[2]"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.cfe_cae_from"/>
                                    <t t-esc="' - '"/>
                                    <t t-esc="doc.cfe_cae_to"/>
                                </span>
                                <br/>
                                <span>
                                    <t t-esc="doc.invoice_date"/>
                                </span>
                                <br/>
                                <span>http://www.dgi.gub.uy</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-bottom: -50px; text-align: center; border: 2px solid black; width: 220px; height: 60px;">
                    <span>Expiration Date</span>
                    <br/>
                    <span> Data de Validade </span>
                    <br/>

                    <t t-esc="doc.cfe_cae_exp_date"/>
                </div>


            </div>
            <div style="font-size: 14px; display: -webkit-box; -webkit-box-pack: justify;">
                <div>
                    <span>Security Code/Código de segurança: </span>
                    <t t-esc="' ' + doc.cfe_hash[:6]"/>
                </div>
                <div>
                    <span>Page </span>
                    <span class="page" />
                                        of <span class="topage" />
                </div>
            </div>
        </div>
    </template>

</odoo>