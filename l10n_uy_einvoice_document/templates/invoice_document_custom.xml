<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_custom_template_prueba">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
            <t t-set="document_name" t-value="doc.cfe_serie_num + dict(doc.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[doc.cfe_type]"/>
                <t t-call="l10n_uy_einvoice_document.report_translation_document" t-lang="doc.partner_id.lang">
                </t>
            </t>
        </t>
    </template>


    <template id="report_translation_document">
        <!-- Re-browse of the record with the partner lang -->
        <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)" />
        <t t-call="l10n_uy_einvoice_document.external_layout_custom">
            <div class="page">
                <div class="oe_structure"/>
            </div>
        </t>
    </template>

    <report id="action_report_l10nuy_einvoice_custom_prueba" string="Factura Customizable" model="account.move" report_type="qweb-pdf" name="l10n_uy_einvoice_document.report_custom_template_prueba" file="l10n_uy_einvoice_document.report_custom_template_prueba" />

    <record id="action_report_l10nuy_einvoice_custom_prueba" model="ir.actions.report">
        <field name="paperformat_id" ref="l10n_uy_einvoice_document.paperformat_l10nuy_custom"/>
        <field name="print_report_name">'%s' % (dict(object.fields_get(allfields=['cfe_type'])['cfe_type']['selection'])[object.cfe_type] + ' ' + object.name)</field>
    </record>
</odoo>
	
